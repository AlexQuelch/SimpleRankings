<!DOCTYPE html>

    {% block content %}
        {% include 'header.html' %}
    {% endblock %}
<div id="wrapper">
    <div id="match_report" class="main_table">
        <form action="{{ url_for('report_result') }}" method="POST">
            <table>
                <caption>Match Report</caption>
                <thead>
                    <th>
                        Winner
                    </th>
                    <th>
                        Loser
                    </th>
                    <th></th>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <select name="winner" style="width:20em;">
                                <option value="" default selected>--select--</option>
                                {% for player in players_by_name %}
                                    <option value="{{ player.player_id }}">{{ player.name }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td>
                            <select name="loser" style="width:20em;">
                                <option value="" default selected>--select--</option>
                                {% for player in players_by_name %}
                                    <option value={{ player.player_id }}>{{ player.name }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td>
                            <button type="submit" style="width:8em;">Report Result</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>
    <div id="match_manager" class="main_table">
        <table>
            <caption>Match Log</caption>
            <thead>
                <tr>
                    <th>Date / Time</th><th>Winner</th><th>Loser</th><th></th>
                </tr>
            </thead>
            <tbody>
                {% set index = matches|length - 1 %}
                {% for match in matches %}
                <form action="{{ url_for('match_mod') }}" method="POST">
                    <tr>
                        <td>{{ match.date }}</td>
                        {% set winner_name = players_dict[match.winner_id].name %}
                        <td style="min-width: 8em;">{{ winner_name }}</td>
                        <td style="min-width: 8em;">{{ players_dict[match.loser_id].name }}</td>
                        <td>
                            <button type="submit" value={{ index }} name="match_to_delete">Delete</button>
                        </td>
                    </tr>
                </form>
                {% set index = index - 1 %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
